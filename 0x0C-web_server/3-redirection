#!/usr/bin/env bash
# Ensure the script is run as root
if [ "$EUID" -ne 0 ]
  then echo "Please run as root"
  exit
fi

# Step 1: Install Nginx if it isn't installed
if ! which nginx > /dev/null; then
    apt-get update
    apt-get install -y nginx
fi

# Step 2: Configure redirection
# Define the server block configuration
CONFIG='server {
    listen 80;
    server_name _;

    location /redirect_me {
        return 301 https://www.youtube.com/watch?v=QH2-TGUlwu4;
    }
}'

# Backup the original default config
cp /etc/nginx/sites-available/default /etc/nginx/sites-available/default.bak

# Write the new configuration to the default config file
echo "$CONFIG" > /etc/nginx/sites-available/default

# Step 3: Restart Nginx using service
service nginx restart

